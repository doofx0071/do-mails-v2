# do-Mails Email Alias System - Environment Configuration
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================

# Supabase Project URL (Public)
# Get this from your Supabase project dashboard
# Format: https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co

# Supabase Anonymous Key (Public)
# This is safe to expose in client-side code
# Get this from Settings > API in your Supabase dashboard
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Supabase Service Role Key (Server-only - KEEP SECRET!)
# This bypasses RLS and should ONLY be used for admin operations
# Get this from Settings > API in your Supabase dashboard
# WARNING: Never expose this in client-side code
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# =============================================================================
# MAILGUN CONFIGURATION
# =============================================================================

# Mailgun API Key (Server-only - KEEP SECRET!)
# Get this from your Mailgun dashboard > Settings > API Keys
# Format: key-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
MAILGUN_API_KEY=key-your-mailgun-api-key-here

# Mailgun Domain
# The domain you've configured in Mailgun for sending emails
# Example: mg.yourdomain.com or yourdomain.com
MAILGUN_DOMAIN=mg.yourdomain.com

# Mailgun Base URL (Optional)
# Use EU endpoint if your domain is in EU region
# US: https://api.mailgun.net (default)
# EU: https://api.eu.mailgun.net
MAILGUN_BASE_URL=https://api.mailgun.net

# Mailgun Webhook Signing Key (Server-only - KEEP SECRET!)
# Used to verify webhook authenticity from Mailgun
# Get this from Mailgun dashboard > Settings > Webhooks
MAILGUN_WEBHOOK_SIGNING_KEY=your-webhook-signing-key-here

# =============================================================================
# AUTOMATIC DOMAIN MANAGEMENT
# =============================================================================

# Webhook URL for automatic Mailgun setup
# This should be your public app URL + /api/webhooks/mailgun
# Development (with ngrok): https://abc123.ngrok.io/api/webhooks/mailgun
# Production: https://yourdomain.com/api/webhooks/mailgun
WEBHOOK_URL=https://your-app-domain.com/api/webhooks/mailgun

# Public App URL for webhook configuration
# Used for generating webhook URLs automatically
# Should match your deployed app URL
NEXT_PUBLIC_APP_URL=https://your-app-domain.com

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Application Base URL
# Used for generating absolute URLs in emails and redirects
# Development: http://localhost:3000
# Production: https://yourdomain.com
APP_BASE_URL=http://localhost:3000

# Next.js Environment
# Set to 'development' for local dev, 'production' for deployment
NODE_ENV=development

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# DNS Servers for Domain Verification (Optional)
# Comma-separated list of DNS servers to use for domain verification
# Default: Uses system DNS servers
# DNS_SERVERS=8.8.8.8,1.1.1.1

# Domain Verification Timeout (Optional)
# Timeout in milliseconds for DNS verification requests
# Default: 10000 (10 seconds)
# DOMAIN_VERIFICATION_TIMEOUT=10000

# Domain Verification Retries (Optional)
# Number of retry attempts for failed DNS verification
# Default: 3
# DOMAIN_VERIFICATION_RETRIES=3

# =============================================================================
# DEVELOPMENT ONLY
# =============================================================================

# Enable debug logging (Development only)
# Set to 'true' to enable verbose logging
# DEBUG=false

# Disable SSL verification (Development only - NEVER use in production)
# Only set to 'true' for local development with self-signed certificates
# NODE_TLS_REJECT_UNAUTHORIZED=1

# =============================================================================
# SECURITY NOTES
# =============================================================================

# 1. NEVER commit .env.local or any file containing real secrets to git
# 2. Use different keys/domains for development and production
# 3. Rotate keys regularly, especially if compromised
# 4. The SUPABASE_SERVICE_ROLE_KEY bypasses all security - use sparingly
# 5. Mailgun keys should be restricted to your domain only
# 6. Use HTTPS in production for APP_BASE_URL
# 7. Consider using a secrets management service for production

# =============================================================================
# SETUP CHECKLIST
# =============================================================================

# [ ] Copy this file to .env.local
# [ ] Create Supabase project and get URL + keys
# [ ] Set up Mailgun account and domain
# [ ] Configure DNS records for your domain
# [ ] Set up Mailgun webhooks pointing to your app
# [ ] Test email sending and receiving
# [ ] Verify domain verification works
# [ ] Check that RLS policies are working correctly
